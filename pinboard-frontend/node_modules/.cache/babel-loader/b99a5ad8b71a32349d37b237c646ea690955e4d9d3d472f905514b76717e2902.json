{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\suki\\\\Desktop\\\\pinboard\\\\pinboard-frontend\\\\src\\\\components\\\\HomePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport PinGrid from './pin/PinGrid';\nimport Spinner from './common/Spinner';\nimport { getPins } from '../services/pinService';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HomeContainer = styled.div`\n  padding: 0.5rem;\n`;\n_c = HomeContainer;\nconst LoadingMessage = styled.div`\n  text-align: center;\n  padding: 2rem;\n  color: #666;\n`;\n_c2 = LoadingMessage;\nconst EndMessage = styled.div`\n  text-align: center;\n  padding: 2rem;\n  color: #666;\n  font-weight: 500;\n`;\n_c3 = EndMessage;\nconst HomePage = () => {\n  _s();\n  const [pins, setPins] = useState([]);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const fetchPins = async () => {\n    try {\n      const response = await getPins(page);\n      const newPins = response.data;\n      if (newPins.length === 0) {\n        setHasMore(false);\n      } else {\n        setPins(prevPins => [...prevPins, ...newPins]);\n        setPage(prevPage => prevPage + 1);\n      }\n      setLoading(false);\n    } catch (err) {\n      console.error('获取图钉失败:', err);\n      setError('获取图钉失败，请稍后再试');\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchPins();\n  }, []);\n  if (loading && pins.length === 0) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(HomeContainer, {\n    children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n      dataLength: pins.length,\n      next: fetchPins,\n      hasMore: hasMore,\n      loader: /*#__PURE__*/_jsxDEV(LoadingMessage, {\n        children: \"\\u52A0\\u8F7D\\u66F4\\u591A\\u56FE\\u9489...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this),\n      endMessage: /*#__PURE__*/_jsxDEV(EndMessage, {\n        children: pins.length > 0 ? '已经到底啦！没有更多图钉了~' : '暂时还没有图钉，快来分享第一个吧！'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(PinGrid, {\n        pins: pins\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(HomePage, \"x/i7aB6/7jA5cOPTCBvTCkjX7Ss=\");\n_c4 = HomePage;\nexport default HomePage;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"HomeContainer\");\n$RefreshReg$(_c2, \"LoadingMessage\");\n$RefreshReg$(_c3, \"EndMessage\");\n$RefreshReg$(_c4, \"HomePage\");","map":{"version":3,"names":["React","useState","useEffect","InfiniteScroll","PinGrid","Spinner","getPins","styled","jsxDEV","_jsxDEV","HomeContainer","div","_c","LoadingMessage","_c2","EndMessage","_c3","HomePage","_s","pins","setPins","page","setPage","hasMore","setHasMore","loading","setLoading","error","setError","fetchPins","response","newPins","data","length","prevPins","prevPage","err","console","fileName","_jsxFileName","lineNumber","columnNumber","children","dataLength","next","loader","endMessage","_c4","$RefreshReg$"],"sources":["C:/Users/suki/Desktop/pinboard/pinboard-frontend/src/components/HomePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport PinGrid from './pin/PinGrid';\r\nimport Spinner from './common/Spinner';\r\nimport { getPins } from '../services/pinService';\r\nimport styled from 'styled-components';\r\n\r\nconst HomeContainer = styled.div`\r\n  padding: 0.5rem;\r\n`;\r\n\r\nconst LoadingMessage = styled.div`\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #666;\r\n`;\r\n\r\nconst EndMessage = styled.div`\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #666;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst HomePage = () => {\r\n  const [pins, setPins] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  \r\n  const fetchPins = async () => {\r\n    try {\r\n      const response = await getPins(page);\r\n      const newPins = response.data;\r\n      \r\n      if (newPins.length === 0) {\r\n        setHasMore(false);\r\n      } else {\r\n        setPins(prevPins => [...prevPins, ...newPins]);\r\n        setPage(prevPage => prevPage + 1);\r\n      }\r\n      \r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error('获取图钉失败:', err);\r\n      setError('获取图钉失败，请稍后再试');\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    fetchPins();\r\n  }, []);\r\n  \r\n  if (loading && pins.length === 0) {\r\n    return <Spinner />;\r\n  }\r\n  \r\n  if (error) {\r\n    return <div>Error: {error}</div>;\r\n  }\r\n  \r\n  return (\r\n    <HomeContainer>\r\n      <InfiniteScroll\r\n        dataLength={pins.length}\r\n        next={fetchPins}\r\n        hasMore={hasMore}\r\n        loader={<LoadingMessage>加载更多图钉...</LoadingMessage>}\r\n        endMessage={\r\n          <EndMessage>\r\n            {pins.length > 0 \r\n              ? '已经到底啦！没有更多图钉了~' \r\n              : '暂时还没有图钉，快来分享第一个吧！'}\r\n          </EndMessage>\r\n        }\r\n      >\r\n        <PinGrid pins={pins} />\r\n      </InfiniteScroll>\r\n    </HomeContainer>\r\n  );\r\n};\r\n\r\nexport default HomePage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,cAAc,MAAM,iCAAiC;AAC5D,OAAOC,OAAO,MAAM,eAAe;AACnC,OAAOC,OAAO,MAAM,kBAAkB;AACtC,SAASC,OAAO,QAAQ,wBAAwB;AAChD,OAAOC,MAAM,MAAM,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,MAAMC,aAAa,GAAGH,MAAM,CAACI,GAAG;AAChC;AACA,CAAC;AAACC,EAAA,GAFIF,aAAa;AAInB,MAAMG,cAAc,GAAGN,MAAM,CAACI,GAAG;AACjC;AACA;AACA;AACA,CAAC;AAACG,GAAA,GAJID,cAAc;AAMpB,MAAME,UAAU,GAAGR,MAAM,CAACI,GAAG;AAC7B;AACA;AACA;AACA;AACA,CAAC;AAACK,GAAA,GALID,UAAU;AAOhB,MAAME,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACoB,IAAI,EAAEC,OAAO,CAAC,GAAGrB,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACsB,OAAO,EAAEC,UAAU,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACwB,OAAO,EAAEC,UAAU,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC0B,KAAK,EAAEC,QAAQ,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAM4B,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMxB,OAAO,CAACe,IAAI,CAAC;MACpC,MAAMU,OAAO,GAAGD,QAAQ,CAACE,IAAI;MAE7B,IAAID,OAAO,CAACE,MAAM,KAAK,CAAC,EAAE;QACxBT,UAAU,CAAC,KAAK,CAAC;MACnB,CAAC,MAAM;QACLJ,OAAO,CAACc,QAAQ,IAAI,CAAC,GAAGA,QAAQ,EAAE,GAAGH,OAAO,CAAC,CAAC;QAC9CT,OAAO,CAACa,QAAQ,IAAIA,QAAQ,GAAG,CAAC,CAAC;MACnC;MAEAT,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,OAAOU,GAAG,EAAE;MACZC,OAAO,CAACV,KAAK,CAAC,SAAS,EAAES,GAAG,CAAC;MAC7BR,QAAQ,CAAC,cAAc,CAAC;MACxBF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAEDxB,SAAS,CAAC,MAAM;IACd2B,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIJ,OAAO,IAAIN,IAAI,CAACc,MAAM,KAAK,CAAC,EAAE;IAChC,oBAAOxB,OAAA,CAACJ,OAAO;MAAAiC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpB;EAEA,IAAId,KAAK,EAAE;IACT,oBAAOlB,OAAA;MAAAiC,QAAA,GAAK,SAAO,EAACf,KAAK;IAAA;MAAAW,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAClC;EAEA,oBACEhC,OAAA,CAACC,aAAa;IAAAgC,QAAA,eACZjC,OAAA,CAACN,cAAc;MACbwC,UAAU,EAAExB,IAAI,CAACc,MAAO;MACxBW,IAAI,EAAEf,SAAU;MAChBN,OAAO,EAAEA,OAAQ;MACjBsB,MAAM,eAAEpC,OAAA,CAACI,cAAc;QAAA6B,QAAA,EAAC;MAAS;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAgB,CAAE;MACnDK,UAAU,eACRrC,OAAA,CAACM,UAAU;QAAA2B,QAAA,EACRvB,IAAI,CAACc,MAAM,GAAG,CAAC,GACZ,gBAAgB,GAChB;MAAmB;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACb,CACb;MAAAC,QAAA,eAEDjC,OAAA,CAACL,OAAO;QAACe,IAAI,EAAEA;MAAK;QAAAmB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACT;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEpB,CAAC;AAACvB,EAAA,CA1DID,QAAQ;AAAA8B,GAAA,GAAR9B,QAAQ;AA4Dd,eAAeA,QAAQ;AAAC,IAAAL,EAAA,EAAAE,GAAA,EAAAE,GAAA,EAAA+B,GAAA;AAAAC,YAAA,CAAApC,EAAA;AAAAoC,YAAA,CAAAlC,GAAA;AAAAkC,YAAA,CAAAhC,GAAA;AAAAgC,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}